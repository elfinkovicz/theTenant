<!doctype html>
<html lang="de" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Honigwabe - Live Stream & Shop</title>
    <script>
      // FOUC Prevention: Load theme BEFORE React renders
      (function() {
        function hexToRgb(hex) {
          const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
          return result 
            ? parseInt(result[1], 16) + ' ' + parseInt(result[2], 16) + ' ' + parseInt(result[3], 16)
            : '0 0 0';
        }

        function applyTheme(colors) {
          const root = document.documentElement;
          root.style.setProperty('--color-primary', hexToRgb(colors.primary));
          root.style.setProperty('--color-primary-hover', hexToRgb(colors.primaryHover));
          root.style.setProperty('--color-secondary', hexToRgb(colors.secondary));
          root.style.setProperty('--color-secondary-hover', hexToRgb(colors.secondaryHover));
          root.style.setProperty('--color-background', hexToRgb(colors.background));
          root.style.setProperty('--color-background-light', hexToRgb(colors.backgroundLight));
          root.style.setProperty('--color-text', hexToRgb(colors.text));
          root.style.setProperty('--color-text-secondary', hexToRgb(colors.textSecondary));
          root.style.setProperty('--color-border', hexToRgb(colors.border));
          root.style.setProperty('--color-accent', hexToRgb(colors.accent));
        }

        // Default theme (Honigwabe Standard)
        const defaultTheme = {
          primary: '#f59e0b',
          primaryHover: '#d97706',
          secondary: '#1f2937',
          secondaryHover: '#374151',
          background: '#030712',
          backgroundLight: '#111827',
          text: '#ffffff',
          textSecondary: '#9ca3af',
          border: '#374151',
          accent: '#f59e0b'
        };

        try {
          // Try to load cached theme from localStorage
          const cachedTheme = localStorage.getItem('honigwabe_theme_cache');
          if (cachedTheme) {
            const theme = JSON.parse(cachedTheme);
            applyTheme(theme.colors || defaultTheme);
          } else {
            applyTheme(defaultTheme);
          }
        } catch (e) {
          // Fallback to default if localStorage fails
          applyTheme(defaultTheme);
        }
      })();
    </script>
  </head>
  <body class="bg-dark-950 text-white">
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
